<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<div th:replace="fragments/components :: header"></div>
<meta charset="ISO-8859-1">
<title>Add Transaction - United Overseas Bank</title>
</head>
<body>
	<div th:replace="fragments/components :: navbar"></div>
	<div class="container my-3" id="content">

		<div class="h-100 p-3 d-flex flex-column justify-content-center">

			<h5 class="align-self-center my-3">
				Renew your <span th:text="${acct.accountType}"></span> account
			</h5>
			<p>
				Your <span th:text="${acct.accountType}"></span> (Account Id: <span
					th:text="${acct.accountId}"></span>) has matured.
			</p>
			<p>
				Total Balance (after interest credited): <strong>SGD <span
					th:text="${totalBalance}"></span></strong>
			</p>
		</div>
		<form
			th:action="@{/process_renew_deposit/} + ${accId} + '/' + ${totalBalance}"
			method="post">
			<p th:if="${msg}=='null'">

				<label for="inputAmount">Input amount to new <span
					th:text="${acct.accountType}"></span> account
				</label><input type="number" step="0.01" class="form-control"
					id="inputAmount" name="depositAmt" required> <span
					class="fst-italic text-muted text-center mt-2">Excess amount
					will be deposited to savings account</span>
				<button type="submit" class="btn btn-primary">Submit</button>
			</p>
			<p th:if="${msg}=='getSavings'">
			<!-- TODO: Add a message saying how much the user is lacking or in excess -->
				<a type="button" class="btn btn-primary" data-toggle="modal"
					href="#renewModal">Select Savings Account</a>
			</p>
			<a href="/welcomeuser" class="btn btn-secondary">Back to Home</a>
		</form>
		<!-- Renew Modal -->
		<div class="modal fade" id="renewModal" tabindex="-1"
			aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Select your savings account</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<form
						th:action="@{/process_renew_deposit_saving/} + ${accId} + '/' + ${totalBalance} + '/' + ${depositAmt}"
						th:method="post" th:object="${acct}">
						<div class="modal-body">
							<div class="mt-3" th:switch="${count}">
								<div th:case="0" class="align-items-center">
									<h3>No Account Record Found</h3>
									<p>
										Click <a href="/createaccount">here</a> to add an account
									</p>
								</div>
								<!-- 								<div th:case="1" class="form-group">
									<select class="form-control" id="selectAccNo" name="accId"
										required>
										<option th:each="option, i : ${optionList}"
											th:value="${option}" th:text="${option}"
											th:selected="${i==0}"></option>
									</select>
								</div> -->
								<div th:case="*">
									<h3>View Account Details</h3>
									<div class="form-row align-items-center">
										<div class="col-auto my-1">
											<select class="custom-select" id="selectAccNo"
												name="accSavingsId" required>
												<option value="" disabled selected required>Select
													an account</option>
												<option th:each="option : ${optionList}"
													th:value="${option}" th:text="${option}"></option>
											</select>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<div class="btn-group">
								<button type="button" class="btn btn-secondary"
									data-dismiss="modal">Close</button>
								<button type="submit" class="btn btn-primary">Submit</button>
							</div>
						</div>
					</form>
				</div>
			</div>

		</div>
		<!-- Renew Modal -->
	</div>
	<div th:replace="fragments/components :: footer"></div>
</body>
</html>